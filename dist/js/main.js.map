{"version":3,"sources":["main.js"],"names":["setCurrentPage","page","_allowedPageNames","hasOwnProperty","Error","requestAnimationFrame","switchElement","dataset","active","drawCanvasCircles","i","circleCanvasElements","length","ctx","getContext","getComputedStyle","width","value","height","size","lineWidth","parseInt","arc","_circleStrokeWith","Math","PI","stroke","beginPath","onWindowVisibilityChange","_cookieAcceptName","none","teaser","resume","_abandonedTitle","title","_defaultTitle","cookieElement","document","querySelector","triggerElements","querySelectorAll","addEventListener","window","onWindowResize","console","info","localStorage","getItem","style","display","e","preventDefault","targetActive"],"mappings":"cAAC,WA8DG,SAHDA,EAAAC,GAnBc,GAAAA,GAAAC,EAAAC,eAAAF,GAAA,EA4Bd,MAAM,IAAIG,MAAM,oBALhBC,sBAAA,WACDC,EAAAC,QAAAC,OAAAP,IAIC,SAAMQ,IACN,IAAA,IAAAC,EAAA,EAAAA,EAAAC,EAAAC,OAAAF,IAAA,CASA,IAAIG,EAAMF,EAAqBD,GAAGI,WAAW,MAP9CT,EAAAA,SAAAA,OAAsBU,iBAAMJ,EAAAD,IAAAM,OAC3BV,EAAAA,SAAAK,EAAAD,GAAAH,QAAAU,OAWAN,EAAqBD,GAAGM,MAAQL,EAAqBD,GAAGQ,OAASC,EANlEN,EAAKO,UAAWV,EAEfG,EAAIM,YACJN,EAAII,YAAQI,EASZR,EAAIS,IAAIH,EAAO,EAAGA,EAAO,EAAGA,EAAO,EAAII,EAAmB,EAAG,EAAIC,KAAKC,IAPtEZ,EAAAa,SAUAb,EAAIc,YAPJd,EAAIO,YAAYG,EAShBV,EAAIS,IAAIH,EAAO,EAAGA,EAAO,EAAGA,EAAO,EAAII,GAAoBC,KAAKC,GAAK,EAAG,EAAID,KAAKC,GAAK,IAAMR,EAAQO,KAAKC,GAAK,GAP9GZ,EAAIc,UAuBN,SAASC,IACRnB,IA3GD,IAAAoB,EAAA,kBACA3B,GAAA4B,KAAA,GAAAC,OAAA,SAAAC,OAAA,UAGMC,EAAkB,gBAFlBJ,EAAAA,SAAoBK,MACpBhC,EAAqB4B,GACrBG,EAAkB,UAClBE,EAAyBD,UAK/BE,EAAAC,SAAAC,cAAA,YACAC,EAAAF,SAAAG,iBAAA,wBACA7B,EAAA0B,SAAAG,iBAAA,2BACMJ,EAAgBC,SAASC,KACPD,SAASG,cAAiB,YAKlDC,iBAAA,QAuEE5B,WAEAb,EADAa,EAAAN,QAAAC,SAAAN,EAAA4B,KACA5B,EAAA6B,OAUe7B,EAAkB4B,QAlFnCO,SAAAI,iBAAA,mBA8EA,WACKnC,SAAAA,OAGHN,SAAAA,MAAeE,EAFfF,SAAAA,MAAeE,IA/EjBwC,OAAAD,iBAAA,SAAAE,GAYA,WAEAC,QAAAC,KAAA,+HAGCD,OAAAE,aAAaC,QAAAlB,KAIZO,EAAcY,MAAMC,QAAU,QAF/Bb,EAAAK,iBAAA,QAAA,SAAAS,GACAA,EAAIC,iBACHf,OAAAA,aAAoBa,QAApBpB,GAAA,GACAO,EAAcK,MAAAA,QAAiB,UAK/BE,IAGDA,IAAAA,IAAAA,EAAAA,EAAAA,EAAAA,EAAAA,OAAAA,KAlBD,SAkBCA,GAICJ,EAAgB7B,GAAG+B,iBAAiB,QAAS,SAACS,GAF/CA,EAAAC,iBAIEnD,EAAeuC,EAAgB7B,GAAGH,QAAQ6C,iBAN5CT","file":"main.js","sourcesContent":["(function () {\n\t'use strict';\n\n\t//********************************************\n\t// CONSTANTS\n\t//********************************************\n\tconst _cookieAcceptName = 'cookiesAccepted';\n\tconst _allowedPageNames = {none: '', teaser: 'teaser', resume: 'resume'};\n\tconst _abandonedTitle = 'â¤ Come back â¤';\n\tconst _defaultTitle = document.title;\n\tconst _circleStrokeWith = 15;\n\tconst _circleBackgroundStroke = '#eaeaea';\n\tconst _circleForegroundStroke = '#2c2c2c';\n\n\t//********************************************\n\t// SELECTORS\n\t//********************************************\n\tconst cookieElement = document.querySelector('#cookies');\n\tconst triggerElements = document.querySelectorAll('[data-target-active]');\n\tconst circleCanvasElements = document.querySelectorAll('#languages .lang canvas');\n\tconst switchElement = document.body;\n\tconst menuSwitchElement = document.querySelector('#trigger');\n\n\t//********************************************\n\t// REGISTER EVENT HANDLER\n\t//********************************************\n\tmenuSwitchElement.addEventListener('click', onMenuSwitchClick);\n\tdocument.addEventListener('visibilitychange', onWindowVisibilityChange);\n\twindow.addEventListener('resize', onWindowResize);\n\n\t//********************************************\n\t// INITIALIZATION\n\t//********************************************\n\tinit();\n\n\t///////////////////////////////////////////////////////////////////////\n\n\t//********************************************\n\t// FUNCTIONS\n\t//********************************************\n\tfunction init() {\n\t\t// Show console welcome message\n\t\tconsole.info('You like to look under the hood? Check out the source code on github ðŸ˜Ž\\nhttps://github.com/schwarzdavid/schwarzdavid.rocks');\n\n\t\t// Show cookie hint\n\t\tif (!window.localStorage.getItem(_cookieAcceptName)) {\n\t\t\tcookieElement.style.display = 'block';\n\t\t\tcookieElement.addEventListener('click', (e) => {\n\t\t\t\te.preventDefault();\n\t\t\t\twindow.localStorage.setItem(_cookieAcceptName, true);\n\t\t\t\tcookieElement.style.display = 'none';\n\t\t\t});\n\t\t}\n\n\t\t// Redraw window-size-dependent elements\n\t\tonWindowResize();\n\n\t\t// Bind events to all trigger buttons\n\t\tfor (let i = 0; i < triggerElements.length; i++) {\n\t\t\ttriggerElements[i].addEventListener('click', (e) => {\n\t\t\t\te.preventDefault();\n\t\t\t\tsetCurrentPage(triggerElements[i].dataset.targetActive);\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction setCurrentPage(page) {\n\t\tif (page && _allowedPageNames.hasOwnProperty(page) < 0) {\n\t\t\tthrow new Error('Page not allowed');\n\t\t}\n\n\t\trequestAnimationFrame(() => {\n\t\t\tswitchElement.dataset.active = page;\n\t\t});\n\t}\n\n\tfunction drawCanvasCircles() {\n\t\tfor (let i = 0; i < circleCanvasElements.length; i++) {\n\t\t\tlet ctx = circleCanvasElements[i].getContext('2d');\n\t\t\tlet size = parseInt(window.getComputedStyle(circleCanvasElements[i]).width);\n\t\t\tlet value = parseInt(circleCanvasElements[i].dataset.value);\n\n\t\t\t// TODO: check with firefox\n\t\t\tcircleCanvasElements[i].width = circleCanvasElements[i].height = size;\n\n\t\t\tctx.lineWidth = _circleStrokeWith;\n\n\t\t\tctx.beginPath();\n\t\t\tctx.strokeStyle = _circleBackgroundStroke;\n\t\t\tctx.arc(size / 2, size / 2, size / 2 - _circleStrokeWith, 0, 2 * Math.PI);\n\t\t\tctx.stroke();\n\n\t\t\tctx.beginPath();\n\t\t\tctx.strokeStyle = _circleForegroundStroke;\n\t\t\tctx.arc(size / 2, size / 2, size / 2 - _circleStrokeWith, -Math.PI / 2, 2 * Math.PI / 100 * value - Math.PI / 2);\n\t\t\tctx.stroke();\n\t\t}\n\t}\n\n\t//********************************************\n\t// EVENT HANDLER\n\t//********************************************\n\tfunction onMenuSwitchClick() {\n\t\tif (switchElement.dataset.active === _allowedPageNames.none) {\n\t\t\tsetCurrentPage(_allowedPageNames.teaser);\n\t\t} else {\n\t\t\tsetCurrentPage(_allowedPageNames.none);\n\t\t}\n\t}\n\n\tfunction onWindowVisibilityChange() {\n\t\tif (!document.hidden) {\n\t\t\tdocument.title = _defaultTitle;\n\t\t} else {\n\t\t\tdocument.title = _abandonedTitle;\n\t\t}\n\t}\n\n\tfunction onWindowResize() {\n\t\tdrawCanvasCircles();\n\t}\n}());"]}